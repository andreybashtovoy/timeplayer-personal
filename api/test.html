<html>
<head>
    <script
            src="https://code.jquery.com/jquery-3.6.0.js"
            integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk="
            crossorigin="anonymous"></script>
</head>
<body>
<h1>Hi</h1>
<script async src="https://telegram.org/js/telegram-widget.js?14" data-telegram-login="tp_per_test_bot"
        data-size="large" data-onauth="onTelegramAuth(user)" data-request-access="write"></script>
<script type="text/javascript">
    function onTelegramAuth(user) {
        console.log(user);

        $.ajax({
            'type': "POST",
            'url': "/auth",
            'data': user,
            'success': (data) => {
                if(data.status === "ok"){
                    localStorage.setItem('token', data.token)
                }
            }
        })
    }
</script>
</body>
</html>